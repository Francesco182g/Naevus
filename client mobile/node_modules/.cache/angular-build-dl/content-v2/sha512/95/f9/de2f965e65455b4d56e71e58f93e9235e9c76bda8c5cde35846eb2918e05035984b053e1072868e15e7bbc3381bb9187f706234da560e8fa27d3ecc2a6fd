{"version":3,"sources":["webpack:///src/app/tab2/tab2.page.html","webpack:///src/app/tab2/tab2-routing.module.ts","webpack:///src/app/tab2/tab2.module.ts","webpack:///src/app/tab2/tab2.page.scss","webpack:///src/app/tab2/tab2.page.ts"],"names":["routes","path","component","Tab2PageRoutingModule","imports","forChild","exports","Tab2PageModule","declarations","Tab2Page","cameraPreview","platform","storage","uploadingService","http","apiDjangoService","base64ToGallery","file","ngZone","loadingController","screenshot","photoViewer","fileUploader","hasBaseDropZoneOver","fileToUpload","colorEffect","setZoom","flashMode","focusMode","shot","active","activescreenshot","img_color","img_photometric","img_border1","ipAddress","clearAll","console","log","startCameraAbove","stopCamera","ready","startCamera","x","y","width","height","toBack","camera","previewDrag","tapPhoto","error","base64option","prefix","mediaScanner","takePicture","quality","then","imageData","b64data","atob","IMAGE_PATH","addImage","uploadLoading","btoa","res","err","show","hide","setColorEffect","setFlashMode","setFocusMode","event","queue","map","fileItem","b64toBlob","b64Data","contentType","sliceSize","byteCharacters","byteArrays","offset","length","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","push","blob","Blob","type","uploadImage","requests","fileName","formData","FormData","append","uploadFormData","subscribe","getBorder","items","getAsymmetry","asymmetry","Math","random","classified","getColor","getCentroid","presentLoading","color","centroid","create","cssClass","message","duration","loading","present","onDidDismiss","role","data","changePlaying","run","resume","location","reload","clearPic","save","alert","selector","template"],"mappings":"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","file":"tab2-tab2-module-es5.js","sourcesContent":["export default \"  <ion-header >\\n    <ion-segment *ngIf=\\\"shot==false\\\" placeholder=\\\"Select Flash\\\" [(ngModel)]=\\\"flashMode\\\"\\n    (ionChange)=\\\"changeFlashMode()\\\">\\n    <ion-segment-button value=\\\"off\\\">\\n      <ion-icon color=\\\"danger\\\" name=\\\"flash-off\\\"></ion-icon>\\n      <ion-label color=\\\"danger\\\" >Off</ion-label>\\n    </ion-segment-button>\\n    <ion-segment-button value=\\\"torch\\\">\\n      <ion-icon color=\\\"secondary\\\" name=\\\"flash\\\"></ion-icon>\\n      <ion-label color=\\\"secondary\\\">On</ion-label>\\n    </ion-segment-button>\\n  </ion-segment>\\n\\n  <img *ngIf=\\\"shot==true\\\" [src]=\\\"this.img_color\\\">\\n\\n    <ion-range *ngIf=\\\"shot==true\\\" min=\\\"0\\\" max=\\\"10\\\" step=\\\"1\\\" [value]=\\\"color\\\" snaps color=\\\"danger\\\">\\n      <ion-text slot=\\\"start\\\" size=\\\"small\\\" color=\\\"success\\\">{{this.color}}</ion-text>\\n      <ion-text slot=\\\"end\\\" color=\\\"danger\\\">10</ion-text>\\n    </ion-range>\\n  <!--\\n      <ion-segment placeholder=\\\"Select Focus\\\" [(ngModel)]=\\\"focusMode\\\"\\n      (ionChange)=\\\"changeFocusMode()\\\">\\n        <ion-segment-button value=\\\"auto\\\">\\n          <ion-icon name=\\\"disc\\\"></ion-icon>\\n        </ion-segment-button>\\n        <ion-segment-button value=\\\"fixed\\\">\\n          <ion-icon name=\\\"aperture\\\"></ion-icon>\\n        </ion-segment-button>\\n        <ion-segment-button value=\\\"infinity\\\">\\n          <ion-icon name=\\\"infinite\\\"></ion-icon>\\n        </ion-segment-button>\\n        <ion-segment-button value=\\\"macro\\\">\\n          <ion-icon name=\\\"search\\\"></ion-icon>\\n        </ion-segment-button>\\n      </ion-segment>\\n-->\\n\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  \\n  <ion-row *ngIf=\\\"activescreenshot==true\\\">\\n    <ion-col>\\n      <img [src]=\\\"IMAGE_PATH\\\">\\n    </ion-col>\\n  </ion-row>\\n\\n  <ion-grid *ngIf=\\\"shot==true\\\">\\n    <ion-row>\\n      <ion-col>\\n        Diametro\\n        <ion-range *ngIf=\\\"shot==true\\\" min=\\\"0\\\" max=\\\"10\\\" step=\\\"1\\\" [value]=\\\"centroid\\\" snaps color=\\\"danger\\\">\\n        <ion-text slot=\\\"start\\\" size=\\\"small\\\" color=\\\"success\\\">{{this.centroid}}mm</ion-text>\\n        <ion-text slot=\\\"end\\\" color=\\\"danger\\\">10</ion-text>\\n      </ion-range> \\n      </ion-col>\\n      <ion-col>\\n\\n      </ion-col>\\n      <ion-col>\\n      </ion-col>\\n      <ion-col>\\n        <ion-fab-button>{{this.classified}} %</ion-fab-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n  <ion-grid *ngIf=\\\"shot==true\\\">\\n    <ion-row>\\n      <ion-col>\\n      </ion-col>\\n      <ion-col>\\n        Asimmetria\\n          <ion-range *ngIf=\\\"shot==true\\\" min=\\\"0\\\" max=\\\"10\\\" step=\\\"1\\\" [value]=\\\"asymmetry\\\" snaps color=\\\"danger\\\">\\n          <ion-text slot=\\\"start\\\" size=\\\"small\\\" color=\\\"success\\\">{{this.asymmetry}} </ion-text>\\n          <ion-text slot=\\\"end\\\" color=\\\"danger\\\">10</ion-text>\\n        </ion-range>\\n      </ion-col>\\n\\n    </ion-row>\\n  </ion-grid>\\n\\n  <ion-grid *ngIf=\\\"shot==true\\\">\\n    <ion-row>\\n      <ion-col>\\n        <!--<div>elemento</div>-->\\n      </ion-col>\\n      <ion-col>\\n        <!--<div>elemento</div>-->\\n      </ion-col>\\n      <ion-col>\\n        <!--<div>elemento</div>-->\\n      </ion-col>\\n      <ion-col >\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n  <ion-grid *ngIf=\\\"shot==true\\\">\\n    <ion-row>\\n      <ion-col>\\n        <img (click)=\\\"openImage(this.ipAddress + '/media/photometric.png')\\\"  [src]=\\\"this.img_photometric\\\">\\n      </ion-col>\\n      <ion-col>\\n        <!--<div>elemento</div>-->\\n      </ion-col>\\n      <ion-col>\\n        <!--<div>elemento</div>-->\\n      </ion-col>\\n      <ion-col >\\n        <!--<div>elemento</div>-->\\n\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n  <ion-grid *ngIf=\\\"shot==true\\\">\\n    <ion-row>\\n      <ion-col>\\n        \\n      </ion-col>\\n      <ion-col>\\n        <img (click)=\\\"openImage(this.ipAddress + '/media/border1.png')\\\" [src]=\\\"this.img_border1\\\">\\n      </ion-col>\\n      <ion-col>\\n        <!--<div>elemento</div>-->\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n\\n  <ion-avatar  vertical=\\\"center\\\" horizontal=\\\"center\\\">\\n    <img src=\\\"assets/circle.png\\\">\\n  </ion-avatar>\\n\\n</ion-content>\\n<ion-footer>\\n  <ion-range  min=\\\"1\\\" max=\\\"25\\\" pin color=\\\"primary\\\" [(ngModel)]=\\\"setZoom\\\" (ionChange)=\\\"changeZoom()\\\">\\n    <ion-icon color=\\\"primary\\\" slot=\\\"start\\\" size=\\\"small\\\" name=\\\"search-outline\\\"></ion-icon>\\n    <ion-icon slot=\\\"end\\\" name=\\\"search-outline\\\"></ion-icon>\\n  </ion-range>\\n  \\n  <ion-button *ngIf=\\\"active==false\\\" expand=\\\"block\\\" color=\\\"primary\\\"(click)=\\\"takePicture()\\\">\\n    <ion-icon  size=\\\"big\\\" name=\\\"camera-outline\\\"></ion-icon>\\n  </ion-button>\\n\\n  <ion-grid *ngIf=\\\"shot==true\\\" >\\n    <ion-row>\\n      <ion-col>\\n        <ion-button expand=\\\"block\\\" color=\\\"success\\\"(click)=\\\"saveScreenshot()\\\">\\n          <ion-icon  size=\\\"big\\\" name=\\\"save-outline\\\"></ion-icon>\\n        </ion-button>      \\n      </ion-col>\\n      <ion-col>\\n        <ion-button expand=\\\"block\\\" color=\\\"danger\\\"(click)=\\\"reset()\\\">\\n          <ion-icon  size=\\\"big\\\" name=\\\"refresh-circle-outline\\\"></ion-icon>\\n        </ion-button>      \\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-footer>\\n\\n\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab2Page } from './tab2.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab2Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab2PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Tab2Page } from './tab2.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\nimport { FileUploadModule } from 'ng2-file-upload';\nimport { Tab2PageRoutingModule } from './tab2-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab2PageRoutingModule,\n    FileUploadModule,\n  ],\n  declarations: [Tab2Page]\n})\nexport class Tab2PageModule {}\n","export default \"ion-content {\\n  --background: transparent;\\n}\\n\\nion-avatar {\\n  width: 170px !important;\\n  height: 170px !important;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n}\\n\\nion-col > div {\\n  background-color: #f7f7f7;\\n  border: solid 1px #ddd;\\n  padding: 10px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VzZXJ0aGluay9TY3JpdmFuaWEvVGhlc2lzL0lvbmljL05hZXZ1cyBCRVRBL3NyYy9hcHAvdGFiMi90YWIyLnBhZ2Uuc2NzcyIsInNyYy9hcHAvdGFiMi90YWIyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLHlCQUFhO0FDQ2pCOztBREVFO0VBQ0UsdUJBQXVCO0VBQ3ZCLHdCQUF3QjtFQUN4QixrQkFBa0I7RUFDbEIsUUFBUTtFQUNSLFNBQVM7RUFDVCxnQ0FBZ0M7QUNDcEM7O0FERUU7RUFDRSx5QkFBeUI7RUFDekIsc0JBQXNCO0VBQ3RCLGFBQWE7QUNDakIiLCJmaWxlIjoic3JjL2FwcC90YWIyL3RhYjIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNvbnRlbnQge1xuICAgIC0tYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIH1cbiAgXG4gIGlvbi1hdmF0YXIge1xuICAgIHdpZHRoOiAxNzBweCAhaW1wb3J0YW50O1xuICAgIGhlaWdodDogMTcwcHggIWltcG9ydGFudDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiA1MCU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICB9XG5cbiAgaW9uLWNvbCA+IGRpdiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjdmNztcbiAgICBib3JkZXI6IHNvbGlkIDFweCAjZGRkO1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gIH1cbiIsImlvbi1jb250ZW50IHtcbiAgLS1iYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbn1cblxuaW9uLWF2YXRhciB7XG4gIHdpZHRoOiAxNzBweCAhaW1wb3J0YW50O1xuICBoZWlnaHQ6IDE3MHB4ICFpbXBvcnRhbnQ7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiA1MCU7XG4gIGxlZnQ6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG59XG5cbmlvbi1jb2wgPiBkaXYge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjdmN2Y3O1xuICBib3JkZXI6IHNvbGlkIDFweCAjZGRkO1xuICBwYWRkaW5nOiAxMHB4O1xufVxuIl19 */\";","import { Component, OnInit, NgZone, destroyPlatform } from '@angular/core';\nimport { CameraPreview } from \"@ionic-native/camera-preview/ngx\";\nimport { Platform } from \"@ionic/angular\";\nimport { NativeStorage } from '@ionic-native/native-storage/ngx';\n//Upload and Analysis import\nimport { UploadingService } from '../uploading.service';\nimport { ApiDjangoService } from '../api-django.service';\nimport { FileUploader, FileLikeObject } from 'ng2-file-upload';\nimport { concat } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\nimport { AlertController, LoadingController } from '@ionic/angular';\nimport { File } from '@ionic-native/file/ngx';\nimport { Base64ToGallery, Base64ToGalleryOptions } from '@ionic-native/base64-to-gallery/ngx';\nimport { PhotoViewer } from '@ionic-native/photo-viewer/ngx';\nimport {Screenshot} from '@ionic-native/screenshot/ngx';\n\n@Component({\n  selector: 'app-tab2',\n  templateUrl: 'tab2.page.html',\n  styleUrls: ['tab2.page.scss']\n})\nexport class Tab2Page {\n  //UPLOAD CODE  \n  public fileUploader: FileUploader = new FileUploader({});\n  public hasBaseDropZoneOver: boolean = false;\n  fileToUpload: File = null;\n  blob: any;\n\n\n  IMAGE_PATH: any;\n  colorEffect = 'none';\n  smallPreview: boolean;\n  setZoom = 1;\n  flashMode = 'off';\n  focusMode = 'auto';\n  tapFocus: false;\n\n  shot = false;\n  active = false;\n  activescreenshot = false;\n\n  //Nevus Information\n  //circle = 1;\n  asymmetry: string;\n  border: string;\n  color: string;\n  centroid: string;\n  diameter: \"4\"\n  classified: string;\n  img_color = 'assets/colorful.gif';\n  img_photometric = 'assets/color.gif';\n  img_border1 = 'assets/loading.gif';\n\n  ipAddress = \"http://192.168.1.13:8000\"\n  \n\n\n  constructor(private cameraPreview: CameraPreview,\n    private platform: Platform, private storage: NativeStorage,\n    private uploadingService: UploadingService, private http: HttpClient,\n    private apiDjangoService: ApiDjangoService,\n    private base64ToGallery: Base64ToGallery,\n     private file: File, private ngZone: NgZone,\n     public loadingController: LoadingController,\n    private screenshot : Screenshot,\n    private photoViewer : PhotoViewer\n) {\n  this.clearAll();\n  }\n\n  async ionViewWillEnter() {\n    console.log(\"WILL ENTER: \");\n\n    await this.startCameraAbove();\n  }\n\n  async ionViewWillLeave() {\n    console.log(\"WILL LEAVE\");\n\n    await this.stopCamera();\n  }\n\n  async startCameraAbove() {\n    try {\n\n      await this.platform.ready();\n      await this.cameraPreview.startCamera({\n        x: 0,\n        y: 0,\n        width: this.platform.width(),\n        height: this.platform.height(),\n        toBack: true,\n        camera: \"rear\",\n        previewDrag: false,\n        tapPhoto: true\n      });\n    } catch (err) {\n      console.error(\"startCameraAbove\", err);\n    } finally {\n    }\n  }\n\n  async stopCamera() {\n    try {\n      console.log(\"stopping camera\");\n      await this.cameraPreview.stopCamera();\n    } catch (err) {\n      console.error(\"stop camera error. Err: \", err);\n    } finally {\n    }\n  }\n\n  takePicture() {\n    let base64option: Base64ToGalleryOptions = {\n      prefix: 'img',\n      mediaScanner: false\n    };\n\n    this.cameraPreview.takePicture({\n      width: 1280,\n      height: 1280,\n      quality: 100,\n    }).then(async (imageData: string) => {\n      let b64data = atob(imageData);\n      this.IMAGE_PATH = 'data:image/jpeg;base64,' + imageData;\n      //this.addImage(this.b64toBlob(imageData));\n      this.addImage(imageData);\n      this.uploadLoading();\n      //this.active = true;\n      this.base64ToGallery.base64ToGallery(btoa(b64data), { prefix: '_img', mediaScanner: true }).then(\n        res => console.log(\"Saved Success\", res),\n        err => console.log(\"Error saving image to gallery \", err)\n      );\n    }, (err) => {\n      console.log(err);\n      this.IMAGE_PATH = 'assets/img/test.jpg';\n    });\n  }\n\n  show() {\n    return this.cameraPreview.show();\n  }\n\n\n  async hide() {\n    return this.cameraPreview.hide();\n  }\n\n  async changeColorEffect() {\n    this.cameraPreview.setColorEffect(this.colorEffect);\n  }\n\n  async changeZoom() {\n    this.cameraPreview.setZoom(this.setZoom);\n  }\n\n  async changeFlashMode() {\n    this.cameraPreview.setFlashMode(this.flashMode);\n  }\n\n  async changeFocusMode() {\n    this.cameraPreview.setFocusMode(this.focusMode);\n  }\n\n  fileOverBase(event): void {\n    this.hasBaseDropZoneOver = event;\n  }\n  getFiles(): FileLikeObject[] {\n    return this.fileUploader.queue.map((fileItem) => {\n      return fileItem.file;\n    });\n  }\n\n  addImage(res){\n    const b64toBlob = (b64Data, contentType='', sliceSize=512) => {\n      const byteCharacters = atob(b64Data);\n      const byteArrays = [];\n    \n      for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n        const slice = byteCharacters.slice(offset, offset + sliceSize);\n    \n        const byteNumbers = new Array(slice.length);\n        for (let i = 0; i < slice.length; i++) {\n          byteNumbers[i] = slice.charCodeAt(i);\n        }\n    \n        const byteArray = new Uint8Array(byteNumbers);\n        byteArrays.push(byteArray);\n      }\n    \n      const blob = new Blob(byteArrays, {type: contentType});\n      return blob;\n    }\n    \n    const contentType = 'image/png';\n    const b64Data = res;\n    \n    const blob = b64toBlob(b64Data, contentType);\n    //const blobUrl = URL.createObjectURL(blob);\n    this.uploadImage(blob)\n    //const img = document.createElement('img');\n    //img.src = blobUrl;\n    //document.body.appendChild(img);\n  }\n\n  uploadImage(res){\n    //var blob = new Blob([res], { type: 'image/jpg' });         \n    let requests = [];\n    let fileName=\"melorigin.jpg\";         \n    let formData = new FormData();\n    formData.append('file' , res, \"melorigin.jpg\");\n    requests.push(this.uploadingService.uploadFormData(formData));\n    concat(...requests).subscribe(\n      (res) => {\n        console.log(res);\n        this.shot = true;\n        this.active = true;\n        this.getBorder();\n      },\n      (err) => {  \n        console.log(err);\n      }\n    );\n  }\n  \n  getAsymmetry() {\n    let items = [];\n    items.push(this.apiDjangoService.getAsymmetry());\n    concat(...items).subscribe(\n      (res) => {\n        console.log(res);\n        this.asymmetry = \"\" +res;\n        this.img_photometric = this.ipAddress + \"/media/photometric.png\" + \"?\" + (Math.random() * 3);\n      },\n      (err) => {  \n        console.log(err);\n      }\n    );\n  }\n\n  getBorder() {\n    let items = [];\n    items.push(this.apiDjangoService.getBorder());\n    concat(...items).subscribe(\n      (res) => {\n        console.log(res);\n        this.classified = \"\" +res;\n        this.img_border1 = this.ipAddress + \"/media/border.png\" + \"?\" + (Math.random() * 3);\n        //this.uploadLoading();\n        this.getAsymmetry();\n        this.getColor();\n        this.getCentroid();\n        this.presentLoading();    \n      },\n      (err) => {  \n        console.log(err);\n      }\n    );\n  }\n\n  getColor() {\n    let items = [];\n    items.push(this.apiDjangoService.getColor());\n    concat(...items).subscribe(\n      (res) => {\n        console.log(res);\n        this.color = \"\" +res;\n        this.img_color = this.ipAddress + \"/media/color.png\" + \"?\" + (Math.random() * 3);\n      },\n      (err) => {  \n        console.log(err);\n      }\n    );\n  }\n\n  getCentroid() {\n    let items = [];\n    items.push(this.apiDjangoService.getCentroid());\n    concat(...items).subscribe(\n      (res) => {\n        console.log(res);\n        this.centroid = \"\" +res;\n      },\n      (err) => {  \n        console.log(err);\n      }\n    );\n  }\n\n\n  async presentLoading() {\n    const loading = await this.loadingController.create({\n      cssClass: 'my-custom-class',\n      message: 'Analisi...',\n      duration: 3000\n    });\n    await loading.present();\n\n    const { role, data } = await loading.onDidDismiss();\n    console.log('Loading dismissed!');\n    this.changePlaying();\n  }\n\n  async uploadLoading() {\n\n    const loading = await this.loadingController.create({\n      cssClass: 'my-custom-class',\n      message: 'Upload...',\n      duration: 1000\n    });\n    await loading.present();\n\n    const { role, data } = await loading.onDidDismiss();\n    console.log('Loading dismissed!');\n  }\n\n  changePlaying() {\n    this.ngZone.run(() => {\n      this.shot = true;\n      this.active = true;\n    });\n  }\n\n  reset(event){\n    this.ngZone.run(() => {\n      let requests = [];\n      this.img_color = 'assets/colorful.gif';\n      this.img_photometric = 'assets/color.gif';\n      this.img_border1 = 'assets/loading.gif';\n      this.color = \"\";\n      this.classified = \"\";\n      this.asymmetry = \"\";\n      this.shot = false;\n      this.active = false;\n      this.centroid = \"\";\n    this.platform.resume.subscribe(() => {\n      location.reload();\n    });\n    requests.push(this.apiDjangoService.clearPic());\n    concat(...requests).subscribe(\n      (res) => {\n        console.log(res);\n      },\n      (err) => {  \n        console.log(err);\n      }\n    );\n  });\n  }\n\n  openImage(path){\n    this.photoViewer.show(path + \"?\" + (Math.random() * 3));\n  }\n\n  async saveScreenshot() {\n    this.activescreenshot = true;\n    this.screenshot.save('jpg', 80, 'myscreenshot.jpg').then(() =>{\n      alert(\"Screenshot Salvato!\");\n    });\n    this.activescreenshot = false;\n  }\n\n  clearAll(){\n    let requests = [];\n    requests.push(this.apiDjangoService.clearPic());\n    concat(...requests).subscribe(\n      (res) => {\n        console.log(res);\n      },\n      (err) => {  \n        console.log(err);\n      }\n    );\n  }\n}"]}